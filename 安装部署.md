# chatchat 安装部署
## 1.安装依赖
```
poetry install --with lint,test -E xinference
```
- 会报错 
```
Unable to find installation candidates for onnxruntime (1.19.2)
```
- 手动安装
```
(aikb) [root@VM-0-9-centos langchain_chatchat-0.3.1.3]# pip install onnxruntime==1.9.2
Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple
ERROR: Could not find a version that satisfies the requirement onnxruntime==1.9.2 (from versions: 1.7.0, 1.8.0, 1.8.1, 1.9.0, 1.10.0, 1.11.0, 1.11.1, 1.12.0, 1.12.1, 1.13.1, 1.14.0, 1.14.1, 1.15.0, 1.15.1, 1.16.0, 1.16.1, 1.16.2, 1.16.3)
ERROR: No matching distribution found for onnxruntime==1.9.2
```
- 选择有的版本安装
```
pip install onnxruntime==1.9.0
```
## 2.打包项目
```
pip install -e .
```

## 3.初始化项目
### 3.1 创建环境变量
``` 
export CHATCHAT_ROOT=/opt/data/chatchat
```
### 3.2 初始化配置
```
python chatchat/cli.py init
```
### 3.3 修改配置文件
修改环境变量目录下的配置文件
### 3.4 初始化数据库
``` 
python chatchat/cli.py kb --recreate-vs
```
此操作会清空目录下的数据库
### 3.5 启动项目
```
python chatchat/cli.py start -a

nohup python chatchat/cli.py start -a > /opt/logs/chatchat/application.log 2>&1 &
```